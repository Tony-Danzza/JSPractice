<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Async Await</title>
  <link rel="stylesheet" href="../../base.css">
</head>

<body>

  <script>

    const wait = (amount=0) => new Promise(resolve => setTimeout(resolve, amount))

    // wait(2000).then(()=>{
    //     console.log('üí©pooping takes time')
    // })

    //NOTE: async function declaration
    // async function go(){
    //     console.log('starting')
    //     await wait(2000)
    //     console.log('ending')
    // }

    // go()
    
    // NOTE: async arrow function declaration
    // const arrowGo = async() => {
    //     console.log("starting")
    //     await wait(2000)
    //     console.log('running')
    //     await wait(200)
    //     console.log('Ending')
    // }
    // arrowGo()


    //NOTE: async callback
    window.addEventListener('click', async function(){

    })

    // NOTE: async methods

    const person = {
        name: "Johnny Doe",
        //method
        sayHello: async function(){},
        //method shorthand
        async sayHi(name){
            // console.log(`Hi, ${name}`)
        },
        //method properties
        sayHey: async () =>{}
    }
    // console.log(person.sayHi(person.name))


    function makePizza(toppings = []) {
				const pizzaPromise = new Promise(function (resolve, reject) {
					const bakeTime = 500 + toppings.length * 200
					setTimeout(function () {
						resolve(
							`Here is your ${
								toppings ? toppings.join(', ') : 'Plain'
							} pizza! üçï`
						)
					}, bakeTime)
				})
				return pizzaPromise
			}



    //        NOTE: BAD PRACTICE!
    // async function makeDinner(){
    //     const pizza1 = await makePizza(['pepperoni'])
    //     console.log(pizza1)
    //     const pizza2 = await makePizza(['mushroom', 'pineapple'])
    //     console.log(pizza2)
    // }

    async function makeDinner(){
        const pizzaPromise1 = makePizza(['pepperoni'])
        const pizzaPromise2 = makePizza(['pepperoni', 'sausage'])

        const [pepperoni, meat] = await Promise.allSettled([pizzaPromise1, pizzaPromise2])

        console.log(pepperoni, meat)

        
        
    }

    makeDinner()

  </script>
</body>

</html>
